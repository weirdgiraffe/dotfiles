#!/usr/bin/env bash

if [[ $# -ne 1 ]]; then
  echo "Usage: $0 <URL>"
  exit 1
fi

case ${1} in
  https://*)
    REPO_DIR=${1##https://}
    REPO_DIR=${REPO_DIR%.git}
  ;;
  git@*)
    REPO_DIR=${1##git@}
    REPO_DIR=${REPO_DIR/:/\/}
    REPO_DIR=${REPO_DIR%.git}
  ;;
  *)
    echo "not a git repository URL"
    echo "Usage: $0 <URL>"
    exit 1
  ;;
esac

PARENT_DIR=${REPO_DIR%/*}
echo "repo:${REPO_DIR}"
echo "parent:${PARENT_DIR}"
echo "url:${1}"

cd ~/code
mkdir -p ${PARENT_DIR}
cd ${PARENT_DIR}
git clone ${1}
cd ${REPO_DIR##*/}
